# Описание данной GULP сборки

## Возможности

### HTML

- Минификация полученного файла
	
### Стили

- Компилирование SASS/SCSS/LESS файлов
- Создание из всех css файлов объединенного файла 
- Добавление скомпилированных стилей в объединенный файл
- Добавление префиксов для различных браузеров
- Минификация полученного файла
- Создание sourcemap

### JavaScript

- Обработка всех скриптов Babel для возможности их использования в старых браузерах
- Создание из всех js файлов объединенного файла
- Минификация и обфускация полученного файла (вплоть до выкидывания неиспользуемых кусков кода)
- Создание sourcemap


### Картинки

- На выбор: либо сжатие изображений либо конвертирование их в формат WebP (ненужное закомментировать) 
- Проверка на уже готовые картинки чтобы не обрабатывать по несколько раз одни и те же
	
### SVG

- Создание общего спрайта из всех SVG-шек

## Идея

Есть 2 варианта сборки: для разработки и для релиза. Команды для них:

- `npm run dev`
- `npm run prod`

Папка, в которой собираются оба вида сборки - одна и та же. Чтобы не смешивать файлы для различных видов сборки, эта папка перед началом сборки очищается.

Наблюдение за файлами (`watch`) осуществляется в папке с исходниками, а BrowserSync наблюдает за папкой со сборкой.

### Вариант сборки для разработки

- для стилей не запускается минификация
- для скриптов не запускается минификация и обфускация
- для стилей и скриптов создаются sourcemap

### Вариант сборки для релиза

- для стилей запускается минификация
- для скриптов запускается минификация и обфускация
- для стилей и скриптов не создаются sourcemap

## Важно

Содержимое папки node_modules дано на всякий случай. При "боевом" использовании сборки сначала необходимо очистить данную папку, а так же удалить файл package-lock.json и при помощи команды `npm i` все заново поставить. Эта процедура позволит выяснить, появились ли за время не использования какие-либо противоречия между пакетами, ошибки кода и можно ли вообще в таком виде (без установленных пакетов) передавать свое приложение/проект кому-то другому (запустится ли у него оно).

В index.html скрипты и стили необходимо подключать не отдельными файлами, а лишь, подключив файлы allStyles.css и allScripts.js. Однако, поскольку при соединении Js файлов в один они соединяются по алфавиту, то может получиться так, что некоторые библиотеки будут размещены в неправильном порядке (например, jQuery будет после Bootstrap), что приведет к ошибкам. Поэтому лучше в HTML над подключением основного Js файла подключить что-то типа jQuery из облака.